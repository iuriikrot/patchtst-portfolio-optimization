# Конфигурация эксперимента VKR_Patch
# Применение PatchTST для портфельной оптимизации Марковица

# Параметры данных
data:
  tickers:                          # 20 акций из 10 секторов S&P 500
    # Technology (3)
    - AAPL
    - MSFT
    - INTC
    # Healthcare (3)
    - JNJ
    - UNH
    - PFE
    # Financials (3)
    - JPM
    - WFC
    - GS
    # Energy (2)
    - XOM
    - CVX
    # Consumer Staples (2)
    - PG
    - KO
    # Industrials (2)
    - CAT
    - MMM
    # Consumer Discretionary (2)
    - HD
    - MCD
    # Utilities (1)
    - DUK
    # Communication Services (1)
    - VZ
    # Materials (1)
    - NEM
  start_date: "2010-01-01"
  end_date: "2025-01-01"
  price_column: "Adj Close"

# Параметры бэктестинга
backtest:
  train_window: 1260                # 5 лет (252 * 5)
  test_window: 21                   # 1 месяц

# Параметры моделей
models:
  arima:
    max_p: 3
    max_d: 1
    max_q: 3
    stepwise: true

  patchtst:
    mode: "full"                    # fast | full

    # Быстрый режим (для отладки)
    fast:
      input_length: 252
      pred_length: 21
      patch_length: 21
      stride: 21
      d_model: 64
      n_heads: 4
      n_layers: 2
      d_ff: 256
      dropout: 0.2
      use_revin: true
      mask_ratio: 0.4
      pretrain_epochs: 3
      finetune_epochs: 3
      pretrain_lr: 0.0001
      batch_size: 64

    # Полный режим
    full:
      input_length: 252             # 1 год
      pred_length: 21               # 1 месяц
      patch_length: 16
      stride: 8
      d_model: 128
      n_heads: 16
      n_layers: 3
      d_ff: 512
      dropout: 0.1
      use_revin: true
      mask_ratio: 0.15
      pretrain_epochs: 20
      finetune_epochs: 10
      pretrain_lr: 0.005
      batch_size: 64

# Параметры оптимизации Марковица
optimization:
  risk_free_rate: 0.04              # 4% годовых
  covariance: "ledoit_wolf"         # sample | ledoit_wolf

  constraints:
    long_only: true
    fully_invested: true
    max_weight: 0.2                 # Максимум 20% на актив
    min_weight: 0.01                # Минимум 1% на актив
    gross_exposure: 1.5             # Только при long_only=false
